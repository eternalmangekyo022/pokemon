{"version":3,"sources":["App.jsx","index.js"],"names":["distance","coord1","coord2","a","unit","split","lat1","lon1","lat2","lon2","parseFloat","radlat1","Math","PI","radlat2","theta","radtheta","dist","sin","cos","acos","url","questUrl","fetch","res","console","log","json","sortQuests","quests","error","alert","window","location","pop","list","index","popped","temp","length","i","Error","done","filter","coord","chose","obj","lat","lng","at","elemDist","indexOf","questCreateGpx","coords","stringFile","forEach","GetQuest","props","handleGetQuest","state","quest","fetchQuest","then","fileDownload","Blob","fileDownloadUrl","handleSelectCity","bind","handleSelectQuest","e","debug","target","value","this","setState","className","name","onChange","hidden","urls","map","rewards","label","category","j","literal","reward","onClick","React","Component","ConvertToGpx","inputText","handleFormSubmit","parseCoords","lon","blob","createGpx","URL","createObjectURL","dofileDownload","click","revokeObjectURL","text","matchAll","preventDefault","downloadFile","onSubmit","type","style","display","download","href","ref","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.650ba5ee.chunk.js","sourcesContent":["import React from \"react\";\nimport \"./App.css\";\nimport { rewards, urls } from \"./bundle.json\";\n\nimport fileDownload from \"js-file-download\"\n\n\nasync function distance(coord1, coord2, unit = \"K\") {\n  let [lat1, lon1] = coord1.split(\",\");\n  let [lat2, lon2] = coord2.split(\",\");\n  lat1 = parseFloat(lat1);\n  lon1 = parseFloat(lon1);\n  lat2 = parseFloat(lat2);\n  lon2 = parseFloat(lon2);\n\n  if (lat1 === lat2 && lon1 === lon2) {\n    return 0;\n  } else {\n    var radlat1 = (Math.PI * lat1) / 180;\n    var radlat2 = (Math.PI * lat2) / 180;\n    var theta = lon1 - lon2;\n    var radtheta = (Math.PI * theta) / 180;\n    var dist =\n      Math.sin(radlat1) * Math.sin(radlat2) +\n      Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);\n    if (dist > 1) {\n      dist = 1;\n    }\n    dist = Math.acos(dist);\n    dist = (dist * 180) / Math.PI;\n    dist = dist * 60 * 1.1515;\n    if (unit === \"K\") {\n      dist = dist * 1.609344;\n    }\n    if (unit === \"N\") {\n      dist = dist * 0.8684;\n    }\n    return dist;\n  }\n}\n\nasync function fetchQuest(url, questUrl) {\n  try {\n    let res = await fetch(\"https://cors-anywhere.herokuapp.com/\" + url + questUrl, { \"x-requested-with\": \"fetch\" });\n    console.log(res)\n    res = await res.json();\n    return await sortQuests(res.quests);\n    \n  } catch (err) {\n    console.error(err + \" fetchQuest()\")\n    alert(\"Activate demo server!\")\n    window.location = \"https://cors-anywhere.herokuapp.com/corsdemo\"\n  }\n}\n\nasync function sortQuests(quests) {\n  function pop(list, index) {\n    let temp = [];\n    let popped;\n    if (index === -1) {\n      index = list.length - 1;\n    }\n\n    for (let i = 0; i < list.length; i++) {\n      if (i !== index) {\n        temp = [...temp, list[i]];\n      } else {\n        popped = list[i];\n      }\n    }\n    if (!popped)\n      throw new Error(\n        `index not valid. sortQuests.pop() actual length: ${quests.length}, index given: ${index}`\n      );\n    return [temp, popped];\n  }\n\n  if (quests.length === 0) return \"No quests specified. sortQuests()\";\n\n  let done = [];\n  let popped;\n\n  [quests, popped] = pop(quests, 0);\n  done[0] = popped;\n\n  quests = quests.filter((i) => i !== popped);\n\n  let coord = [];\n\n  while (quests.length > 0) {\n    let temp = [{ chose: null }];\n    let dist = 1000000000;\n    let obj = null;\n    for (let i of quests) {\n      let elemDist = await distance(\n        i.lat + \",\" + i.lng,\n        done.at(-1).lat + \",\" + done.at(-1).lng\n      );\n      temp = [...temp, elemDist];\n\n      if (elemDist < dist) {\n        temp[0].chose = elemDist;\n        dist = elemDist;\n        obj = i;\n      }\n    }\n    coord = [...coord, temp];\n\n    [quests, popped] = pop(quests, quests.indexOf(obj));\n    done = [...done, popped];\n  }\n  return done;\n}\n\nfunction questCreateGpx(coords) {\n  let stringFile = \"\";\n  stringFile += '<?xml version=\"1.0\" encoding=\"utf-8\" standalone=\"yes\"?>\\n';\n  stringFile += \"<gpx>\\n\";\n  stringFile += \"<trk>\\n\";\n  stringFile += \"<trkseg>\\n\";\n\n  coords.forEach((i) => {\n    stringFile += `<trkpt lat=\"${parseFloat(i.lat)}\" lon=\"${parseFloat(\n      i.lng\n    )}\"></trkpt>\\n`;\n  });\n\n  stringFile += `</trkseg>\\n`;\n  stringFile += `</trk>\\n`;\n  stringFile += `</gpx>\\n`;\n  return stringFile;\n}\n\n\n\n// fetch(\"https://cors-anywhere.herokuapp.com/https://nycpokemap.com/quests.php\", { \"x-requested-with\": \"fetch\" })\n// component\nclass GetQuest extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      url: \"\",\n      quest: \"\",\n      fileDownloadUrl: \"\",\n    };\n\n    this.handleSelectCity = this.handleSelectCity.bind(this)\n    this.handleSelectQuest = this.handleSelectQuest.bind(this)\n  }\n\n\n  handleSelectCity(e, debug=false) {\n    if(debug) {\n      alert(`Selected ${ e.target.value }`)\n    }\n\n    this.setState({ url: e.target.value })\n  }\n\n  handleSelectQuest(e, debug=false) {\n    if(debug) {\n      alert(`Selected ${ e.target.value }`)\n    }\n\n    this.setState({ quest: e.target.value })\n  }\n\n  handleGetQuest = () => {\n    if (this.state.url === \"\" || this.state.quest === \"\") {\n      alert(!this.state.url ? \"Select a city!\" : \"Select a quest type!\");\n    } else {\n      fetchQuest(this.state.url, this.state.quest).then((res) => {\n        fileDownload(new Blob([ questCreateGpx(res) ]), \"quest.gpx\")\n      });\n    }\n  };\n\n  render() {\n    return (\n      <div className=\"quest-select-container\">\n        <select name=\"city-name\" className=\"select-quest city\" value={ this.state.url } onChange={ this.handleSelectCity }>\n          <option value=\"\" hidden>\n            City\n          </option>\n          {urls.map((i) => {\n            return (\n              <option\n                className=\"option-url\"\n                value={i.url}\n                key={urls.indexOf(i)}\n              >\n                {i.name}\n              </option>\n            );\n          })}\n        </select>\n        <select name=\"quest-url\" className=\"select-quest quest\" value={ this.state.quest } onChange={ this.handleSelectQuest }>\n          <option value=\"\" hidden>\n            Quest\n          </option>\n          {rewards.map((i) => {\n            return (\n              <optgroup label={i.category} key={rewards.indexOf(i)}>\n                {i.rewards.map((j) => {\n                  return (\n                    <option\n                      value={j.literal}\n                      key={i.rewards.indexOf(j)}\n                    >\n                      {j.reward}\n                    </option>\n                  );\n                })}\n              </optgroup>\n            );\n          })}\n        </select>\n        <button className=\"button-quest\" onClick={(e) => this.handleGetQuest()}>\n          Get quests\n        </button>\n      </div>\n    );\n  }\n}\n\nclass ConvertToGpx extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { inputText: \"\", fileDownloadUrl: \"\" };\n\n    this.handleFormSubmit = this.handleFormSubmit.bind(this);\n  }\n\n  createGpx(temp = this.parseCoords(this.state.inputText)) {\n    let stringFile = \"\";\n    stringFile += '<?xml version=\"1.0\" encoding=\"utf-8\" standalone=\"yes\"?>\\n';\n    stringFile += \"<gpx>\\n\";\n    stringFile += \"<trk>\\n\";\n    stringFile += \"<trkseg>\\n\";\n\n    temp.forEach((i) => {\n      let [lat, lon] = i[0].split(\",\");\n\n      stringFile += `<trkpt lat=\"${parseFloat(lat)}\" lon=\"${parseFloat(\n        lon\n      )}\"></trkpt>\\n`;\n    });\n\n    stringFile += `</trkseg>\\n`;\n    stringFile += `</trk>\\n`;\n    stringFile += `</gpx>\\n`;\n    return stringFile;\n  }\n\n  downloadFile() {\n    const blob = new Blob([this.createGpx(this.state.inputText)]); // Step 3\n    const fileDownloadUrl = URL.createObjectURL(blob); // Step 4\n    this.setState(\n      { fileDownloadUrl: fileDownloadUrl }, // Step 5\n      () => {\n        this.dofileDownload.click(); // Step 6\n        URL.revokeObjectURL(fileDownloadUrl); // Step 7\n        this.setState({ fileDownloadUrl: \"\" });\n      }\n    );\n  }\n\n  parseCoords() {\n    const coordRegex = /[0-9]{1,3}\\.[0-9]{3,14},.[0-9]{0,3}\\.[0-9]{3,14}/g;\n    const text = this.state.inputText;\n    return [...text.matchAll(coordRegex)];\n  }\n\n  handleFormSubmit(e) {\n    e.preventDefault();\n\n    this.downloadFile();\n  }\n\n  render() {\n    return (\n      <>\n        <form onSubmit={(e) => this.handleFormSubmit(e)} className=\"gpx-form\">\n          <input\n            type=\"text\"\n            value={this.state.inputText}\n            onChange={(e) => {\n              this.setState({ inputText: e.target.value });\n            }}\n          />\n          <input type=\"submit\" value=\"Get .gpx file\" className=\"gpx-submit\" />\n        </form>\n\n        <a\n          style={{ display: \"none\" }}\n          download={\"test.gpx\"}\n          href={this.state.fileDownloadUrl}\n          ref={(e) => (this.dofileDownload = e)}\n        >\n          download it\n        </a>\n      </>\n    );\n  }\n}\n// component\nexport default function App() {\n  /* Functions */\n  // const copyToClipboard = (text) => {\n  //   let textField = document.createElement('textarea')\n  //   textField.innerText = text\n  //   document.body.appendChild(textField)\n  //   textField.select()\n  //   document.execCommand('copy')\n  //   textField.remove()\n  // }\n\n  return (\n    <>\n      <ConvertToGpx />\n      <GetQuest />\n    </>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App.jsx';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}